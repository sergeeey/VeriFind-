# APE 2026 - Environment Variables Template
# Copy this file to .env and fill in your values
# DO NOT commit .env to Git (already in .gitignore)

# ==============================================================================
# Neo4j Configuration
# ==============================================================================
NEO4J_USER=neo4j
NEO4J_PASSWORD=your_password_here
NEO4J_URI=bolt://localhost:7688

# ==============================================================================
# TimescaleDB (Postgres) Configuration
# ==============================================================================
POSTGRES_USER=ape
POSTGRES_PASSWORD=ape_timescale_password_CHANGE_ME
POSTGRES_DB=ape_timeseries
POSTGRES_HOST=localhost
POSTGRES_PORT=5433

# Database URL format (for SQLAlchemy)
DATABASE_URL=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# ==============================================================================
# Redis Configuration
# ==============================================================================
REDIS_HOST=localhost
REDIS_PORT=6380
REDIS_PASSWORD=
REDIS_DB=0

# Redis URL format
REDIS_URL=redis://${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}

# ==============================================================================
# ChromaDB Configuration (Embedded)
# ==============================================================================
CHROMA_PERSIST_DIRECTORY=./chroma_data
CHROMA_COLLECTION_NAME=evidence

# ==============================================================================
# External API Keys
# ==============================================================================

# FRED (Federal Reserve Economic Data)
FRED_API_KEY=your_fred_api_key_here
# Get your key: https://fred.stlouisfed.org/docs/api/api_key.html

# Alpha Vantage (optional, fallback для market data)
ALPHA_VANTAGE_API_KEY=your_alpha_vantage_key_here
# Get your key: https://www.alphavantage.co/support/#api-key

# OpenBB (optional)
OPENBB_API_KEY=your_openbb_key_here

# ==============================================================================
# LLM API Keys
# ==============================================================================

# DeepSeek
DEEPSEEK_API_KEY=your_deepseek_api_key_here
DEEPSEEK_BASE_URL=https://api.deepseek.com

# Anthropic (Claude)
ANTHROPIC_API_KEY=your_anthropic_api_key_here

# OpenAI (GPT-4.5 для Doubter)
OPENAI_API_KEY=your_openai_api_key_here

# ==============================================================================
# Application Configuration
# ==============================================================================

# Environment (development, staging, production)
ENVIRONMENT=development

# Application
APP_NAME=APE-2026
APP_VERSION=0.1.0
APP_HOST=0.0.0.0
APP_PORT=8000

# Security
SECRET_KEY=your_secret_key_for_jwt_CHANGE_ME_32_chars_minimum
JWT_ALGORITHM=HS256
JWT_EXPIRATION_MINUTES=15

# API Authentication (Week 9 Day 1)
# Production API keys (format: API_KEY_<NAME>=<key>:<rate_limit>)
# Example: API_KEY_PROD=prod_key_abc123:1000
API_KEY=dev_key_12345

# Rate Limiting (Week 9 Day 1 - Enhanced)
RATE_LIMIT_REQUESTS_PER_HOUR=100
RATE_LIMIT_BURST_PER_MINUTE=10
RATE_LIMIT_WINDOW_HOURS=1
DEFAULT_RATE_LIMIT=100

# Latency Budgets (seconds)
MAX_QUERY_TIMEOUT=120
MAX_VEE_EXECUTION_TIME=60
MAX_RETRIEVAL_LATENCY=0.5

# ==============================================================================
# VEE (Verifiable Execution Environment) Configuration
# ==============================================================================

# Docker Sandbox
VEE_DOCKER_IMAGE=ape-sandbox:latest
VEE_MEMORY_LIMIT=2g
VEE_CPU_LIMIT=2
VEE_TIMEOUT=60
VEE_NETWORK_MODE=custom

# Allowed hosts (whitelist для network access)
VEE_ALLOWED_HOSTS=api.stlouisfed.org,query.yahooapis.com

# Sandbox Security (Week 9 Day 1)
SANDBOX_TIMEOUT_SECONDS=30
SANDBOX_MAX_MEMORY_MB=512
SANDBOX_ENABLE_NETWORK=false

# ==============================================================================
# Logging Configuration
# ==============================================================================

# Log level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Log format (json, text)
LOG_FORMAT=json

# Log file path
LOG_FILE_PATH=./logs/ape.log

# ==============================================================================
# Monitoring \& Observability
# ==============================================================================

# Prometheus
PROMETHEUS_PORT=9090

# Grafana
GRAFANA_PORT=3000
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin_CHANGE_ME

# ==============================================================================
# Development Settings
# ==============================================================================

# Debug mode (DO NOT enable in production)
DEBUG=true

# Hot reload
RELOAD=true

# CORS origins (comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:8000

# ==============================================================================
# Notes
# ==============================================================================

# 1. FRED API Key: Free tier = 100K requests/day (достаточно для MVP)
# 2. DeepSeek API: ~$0.55/1M tokens (дешево для reasoning)
# 3. Anthropic API: ~$3/1M tokens (Sonnet для validation)
# 4. OpenAI API: ~$5/1M tokens (GPT-4.5 для Doubter)
# 5. ChromaDB: embedded mode (no API key needed)

# Security Checklist (Week 9 Day 1 Enhanced):
# [ ] Changed all passwords from defaults
# [ ] Generated new SECRET_KEY (32+ chars, use: openssl rand -hex 32)
# [ ] Added .env to .gitignore
# [ ] Never commit API keys to Git
# [ ] Use environment-specific .env files (.env.dev, .env.prod)
# [ ] Set ENVIRONMENT=production for production deployment
# [ ] Configure production API keys via API_KEY_<NAME> environment variables
# [ ] Enable HTTPS and set proper CORS_ORIGINS for production
# [ ] Review and adjust rate limits based on expected load
# [ ] Set SANDBOX_ENABLE_NETWORK=false in production (unless required)
# [ ] Configure external API keys (OPENAI_API_KEY, ANTHROPIC_API_KEY) if using LLMs
# [ ] Set DATABASE_USER and DATABASE_PASSWORD to strong values
# [ ] Enable logging to file in production (LOG_FILE_PATH)

# Production Deployment Notes:
# 1. SECRET_KEY: MUST be different from development (use crypto-random generator)
# 2. API Keys: Load from environment, never hardcode in code
# 3. Database Passwords: Use strong, unique passwords for each environment
# 4. Rate Limits: Adjust based on your infrastructure capacity
# 5. CORS Origins: Whitelist only trusted frontend domains
# 6. WebSocket Security: Requires authentication via api_key parameter
